<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="How to Fix Module Circular Dependency" /><meta property="og:locale" content="en" /><meta name="description" content="Circular Dependency is a common issue when developping with multiple modules. It will block the compile process of the project. This article will introduce two different ways to solve this problem." /><meta property="og:description" content="Circular Dependency is a common issue when developping with multiple modules. It will block the compile process of the project. This article will introduce two different ways to solve this problem." /><link rel="canonical" href="https://cymhellfire.github.io/posts/How-To-Fix-Module-Circular-Dependency/" /><meta property="og:url" content="https://cymhellfire.github.io/posts/How-To-Fix-Module-Circular-Dependency/" /><meta property="og:site_name" content="Vault" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-05-02T10:56:25+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="How to Fix Module Circular Dependency" /><meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-05-02T10:56:25+08:00","datePublished":"2022-05-02T10:56:25+08:00","description":"Circular Dependency is a common issue when developping with multiple modules. It will block the compile process of the project. This article will introduce two different ways to solve this problem.","headline":"How to Fix Module Circular Dependency","mainEntityOfPage":{"@type":"WebPage","@id":"https://cymhellfire.github.io/posts/How-To-Fix-Module-Circular-Dependency/"},"url":"https://cymhellfire.github.io/posts/How-To-Fix-Module-Circular-Dependency/"}</script><title>How to Fix Module Circular Dependency | Vault</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Vault"><meta name="application-name" content="Vault"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> </a></div><div class="site-title"> <a href="/">Vault</a></div><div class="site-subtitle font-italic">Learning, thinking, sharing.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/cymhellfire" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['cym-hellfire','qq.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>How to Fix Module Circular Dependency</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>How to Fix Module Circular Dependency</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1651460185" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 2, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/cymhellfire">alexymcai</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="325 words"> <em>1 min</em> read</span></div></div></div><div class="post-content"><p>Circular Dependency is a common issue when developping with multiple modules. It will block the compile process of the project. This article will introduce two different ways to solve this problem.</p><h2 id="problem-reproduce"><span class="mr-2">Problem Reproduce</span><a href="#problem-reproduce" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In general, this issue is happened when classes in different modules dependent on each other. Following is a UML diagram that shows the situation.</p><p><img data-src="/img/2022-05-02-How-To-Fix-Module-Circular-Dependency/UE-Circle-Dependency-UML.jpg" alt="UE-Circular-Dependency-UML" data-proofer-ignore> <em>Circular Dependency</em></p><p>According to the diagram, class <strong>A</strong> belongs to <em>Module1</em> and class <strong>B</strong>/C belongs to <em>Module2</em>. Class <strong>A</strong> holds a reference of class <strong>B</strong> instance, and at the same time, function of class <strong>A</strong> is invoked by wrapper function of class C. To compile the code successfully, it’s necessary to add <em>Module1</em> in public (or private) dependency module name list of <em>Module2</em>’s Build.cs and vise versa. In this situation, a circular dependency is established between <em>Module1</em> and <em>Module2</em>.</p><p><img data-src="/img/2022-05-02-How-To-Fix-Module-Circular-Dependency/Rider-Compile-Error.png" alt="Rider-Compile-Error" data-proofer-ignore> <em>Compile Error of Circular Dependency</em></p><h2 id="static-delegate"><span class="mr-2">Static Delegate</span><a href="#static-delegate" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>One of the solution is using delegate instead of directly function call. Following is the new UML diagram.</p><p><img data-src="/img/2022-05-02-How-To-Fix-Module-Circular-Dependency/UE-Static-Delegate-UML.jpg" alt="UE-Static-Delegate" data-proofer-ignore> <em>Static Delegate</em></p><p>As the diagram shows, a static delegate is involved as the data bridge between class <strong>A</strong> and <strong>C</strong>. Class <strong>C</strong> register the callback function to delegate and it will be triggered when class <strong>A</strong> broadcast the event. In this situation, class <strong>C</strong> no longer dependent on class <strong>A</strong> and <em>Module2</em> no longer dependent on <em>Module1</em>. The circular dependency is fixed.</p><h2 id="dervided-class-override"><span class="mr-2">Dervided Class Override</span><a href="#dervided-class-override" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Another solution is based on dervided class. The overview UML diagram is like this.</p><p><img data-src="/img/2022-05-02-How-To-Fix-Module-Circular-Dependency/UE-Dervided-Override-UML.jpg" alt="UE-Dervided-Override" data-proofer-ignore> <em>Dervided Class Override</em></p><p>In the diagram, a new <em>Abstract Class</em> is added. This class does not provide any functionality but a framework. Class <strong>B</strong> dervided from the <em>Abstract Class</em> and override the <em>FunctionA</em>. The key is set the instance of class <strong>B</strong> to the <strong>Instance</strong> variable of <em>Abstract Class</em>. After that, class <strong>C</strong> can access the <strong>Instance</strong> of <em>Abstract Class</em> without dependency to <em>Module1</em>. When invoke the <em>FunctionA</em>, the overridden version from class <strong>A</strong> will be triggered. The circular dependency problem is no longer exists.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/unreal-engine/'>Unreal Engine</a>, <a href='/categories/programming/'>Programming</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/how-to/" class="post-tag no-text-decoration" >how to</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=How+to+Fix+Module+Circular+Dependency+-+Vault&url=https%3A%2F%2Fcymhellfire.github.io%2Fposts%2FHow-To-Fix-Module-Circular-Dependency%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=How+to+Fix+Module+Circular+Dependency+-+Vault&u=https%3A%2F%2Fcymhellfire.github.io%2Fposts%2FHow-To-Fix-Module-Circular-Dependency%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fcymhellfire.github.io%2Fposts%2FHow-To-Fix-Module-Circular-Dependency%2F&text=How+to+Fix+Module+Circular+Dependency+-+Vault" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Recover-Git-Repo-After-Reinstalled-OS/">Recover Git Repo after Reinstalled OS</a><li><a href="/posts/How-To-Add-Customized-Sequence-Track/">How to Add Customized Sequence Track</a><li><a href="/posts/How-To-Add-New-Viewport-In-Editor/">How to Add New Viewport in Editor</a><li><a href="/posts/TOptional/">TOptional Nullable Struct Variable</a><li><a href="/posts/What-Happened-After-Press-Play-Button-In-Editor/">What Happened after Press Play Button in Editor</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/how-to/">how to</a> <a class="post-tag" href="/tags/learning-ue/">learning ue</a> <a class="post-tag" href="/tags/utils/">utils</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/sequencer/">sequencer</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Recover-Git-Repo-After-Reinstalled-OS/"><div class="card-body"> <em class="small" data-ts="1667227582" data-df="ll" > Oct 31, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Recover Git Repo after Reinstalled OS</h3><div class="text-muted small"><p> What’s the Problem Like Let’s take a look at the phenomenon of this problem. If you reinstall the operation system with some Git repositories on disk, they will be unusable with the new OS as defa...</p></div></div></a></div><div class="card"> <a href="/posts/How-To-Add-New-Viewport-In-Editor/"><div class="card-body"> <em class="small" data-ts="1650680184" data-df="ll" > Apr 23, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to Add New Viewport in Editor</h3><div class="text-muted small"><p> This article will introduce how to add a customized viewport of current level in Unreal Editor. All content are based on Unreal Engine 4.27.2 (binary version from Epic Game Launcher). Other ver...</p></div></div></a></div><div class="card"> <a href="/posts/How-To-Add-Customized-Sequence-Track/"><div class="card-body"> <em class="small" data-ts="1651646462" data-df="ll" > May 4, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to Add Customized Sequence Track</h3><div class="text-muted small"><p> How Sequencer Works? This chapter focuses on the Sequencer relavent classes to figure out the basic mechanism that Sequencer works. The UML diagram below shows some of the relavent classes and the...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/How-To-Add-New-Viewport-In-Editor/" class="btn btn-outline-primary" prompt="Older"><p>How to Add New Viewport in Editor</p></a> <a href="/posts/How-To-Add-Customized-Sequence-Track/" class="btn btn-outline-primary" prompt="Newer"><p>How to Add Customized Sequence Track</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/how-to/">how to</a> <a class="post-tag" href="/tags/learning-ue/">learning ue</a> <a class="post-tag" href="/tags/utils/">utils</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/sequencer/">sequencer</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/cymhellfire">alexymcai</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
